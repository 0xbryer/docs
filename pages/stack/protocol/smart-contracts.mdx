---
title: Smart Contract Overview
lang: en-US
description: Learn how smart contracts work at a high level.
---

import { Callout } from 'nextra/components'

# Smart Contract Overview

todo: check the contracts are all covered here and have appropriate descriptions

This guide explains how smart contracts work at a high level functionality
of the smart contract components.

## L1 contracts

todo: update the links so they link to the audited version of the contract

### L2OutputOracle

[The `L2OutputOracle` contract](https://github.com/ethereum-optimism/optimism/blob/65ec61dde94ffa93342728d324fecf474d228e1f/packages/contracts-bedrock/contracts/L1/L2OutputOracle.sol) contains the state root of the Optimism blockchain (OP Mainnet, OP Sepolia, etc.).
Once fault proofs are activated, it will be the one that receives the result of the fault proof process.

This is the contract that replaces the old State Commitment Chain.

### OptimismPortal

[The `OptimismPortal` contract](https://github.com/ethereum-optimism/optimism/blob/65ec61dde94ffa93342728d324fecf474d228e1f/packages/contracts-bedrock/contracts/L1/OptimismPortal.sol) provides the low-level API for communications between layers. Unless you are trying to send L2 transactions via L1 to bypass the sequencer, we strongly recommend sending messages between L1 and L2 via the L1CrossDomainMessenger and L2CrossDomainMessenger.

### L1CrossDomainMessenger

[The `L1CrossDomainMessenger` contract](https://github.com/ethereum-optimism/optimism/blob/65ec61dde94ffa93342728d324fecf474d228e1f/packages/contracts-bedrock/contracts/L1/L1CrossDomainMessenger.sol) is used for sending messages between the underlying L1 (Ethereum, Sepolia, etc.) and L2 (OP Mainnet, OP Sepolia, etc.).

### L1StandardBridge

[The `L1StandardBridge` contract](https://github.com/ethereum-optimism/optimism/blob/65ec61dde94ffa93342728d324fecf474d228e1f/packages/contracts-bedrock/contracts/L1/L1StandardBridge.sol) uses `L1CrossDomainMessenger` to transfer ETH and ERC-20 tokens between the underlying L1 (Ethereum, Sepolia, etc.) and L2 (OP Mainnet, OP Sepolia, etc.).

## L2 contracts (predeploys)

### L1Block

[The `L1Block` contract](https://github.com/ethereum-optimism/optimism/blob/65ec61dde94ffa93342728d324fecf474d228e1f/packages/contracts-bedrock/contracts/L2/L1Block.sol) sits at address `0x4200000000000000000000000000000000000015`.
You can use [the getter functions](https://docs.soliditylang.org/en/v0.8.12/contracts.html#getter-functions) to get these parameters:

*   `number`: The latest L1 block number known to L2 (the `L1BlockNumber` contract is still supported to avoid breaking existing applications)
*   `timestamp`: The timestamp of the latest L1 block
*   `basefee`: The base fee of the latest L1 block
*   `hash`: The hash of the latest L1 block
*   `sequenceNumber`: The number of the L2 block within the epoch (the epoch changes when there is a new L1 block)

Currently the L1 information is delayed by two block confirmations (\~24 seconds) to minimize the impact of reorgs.

### SequencerFeeVault

[The `SequencerFeeVault` contract](https://github.com/ethereum-optimism/optimism/blob/65ec61dde94ffa93342728d324fecf474d228e1f/packages/contracts-bedrock/contracts/L2/SequencerFeeVault.sol) handles funding the sequencer on L1 using the ETH base fee on L2.

The fees are calculated using [EIP 1559](https://github.com/ethereum/EIPs/blob/master/EIPS/eip-1559.md), the same mechanism that Ethereum uses (but with different parameter values).

### L2ToL1MessagePasser

[The `L2ToL1MessagePasser` contract](https://github.com/ethereum-optimism/optimism/blob/65ec61dde94ffa93342728d324fecf474d228e1f/packages/contracts-bedrock/contracts/L2/L2ToL1MessagePasser.sol) is used internally by `L2CrossDomainMessenger` to initiate withdrawals.

Note that there are two contracts under this name:

*   [The legacy contract](https://github.com/ethereum-optimism/optimism/blob/65ec61dde94ffa93342728d324fecf474d228e1f/packages/contracts-bedrock/contracts/legacy/LegacyMessagePasser.sol) at address `0x4200000000000000000000000000000000000000`
*   [The new contract](https://github.com/ethereum-optimism/optimism/blob/65ec61dde94ffa93342728d324fecf474d228e1f/packages/contracts-bedrock/contracts/L2/L2ToL1MessagePasser.sol) at address `0x4200000000000000000000000000000000000016`

### L2CrossDomainMessenger

[The `L2CrossDomainMessenger` contract](https://github.com/ethereum-optimism/optimism/blob/65ec61dde94ffa93342728d324fecf474d228e1f/packages/contracts-bedrock/contracts/L2/L2CrossDomainMessenger.sol) is used to send messages from L2 (OP Mainnet, OP Sepolia, etc.) to the underlying L1 (Ethereum, Sepolia, etc.).

### L2StandardBridge

[The `L2StandardBridge` contract](https://github.com/ethereum-optimism/optimism/blob/65ec61dde94ffa93342728d324fecf474d228e1f/packages/contracts-bedrock/contracts/L2/L2StandardBridge.sol) is a wrapper around the `L2CrossDomainMessenger` that can handle token transfers.

### WETH9

[The WETH9 contract](https://web.archive.org/web/20221022164309/https://weth.io/) is an ERC-20 token that wraps around ETH to provide extra functionality, such as approvals.

### Legacy Contracts

Those are contracts that have been superseded, but are kept in case any deployed contract depends on them.

*   [L1BlockNumber](https://github.com/ethereum-optimism/optimism/blob/65ec61dde94ffa93342728d324fecf474d228e1f/packages/contracts-bedrock/contracts/legacy/L1BlockNumber.sol):
    The `L1BlockNumber` contract provides the number of the latest L1 block.
    In Bedrock it is simply a proxy to [`L1Block`](#l1block).

*   [DeployerWhitelist](https://github.com/ethereum-optimism/optimism/blob/65ec61dde94ffa93342728d324fecf474d228e1f/packages/contracts-bedrock/contracts/legacy/DeployerWhitelist.sol):
    The `DeployerWhitelist` contract used to manage the whitelist before [OP Mainnet moved out of beta](https://twitter.com/optimismFND/status/1471571415774023682).

*   [OVM\_ETH](https://github.com/ethereum-optimism/optimism/blob/65ec61dde94ffa93342728d324fecf474d228e1f/packages/contracts-bedrock/contracts/legacy/LegacyERC20ETH.sol):
    The `OVM_ETH` contract used to manage users ETH balances prior to Bedrock.

## Releases

The full smart contract release process is documented in the [monorepo](https://github.com/ethereum-optimism/optimism?tab=readme-ov-file#development-and-release-process).
All production releases are always tags, versioned as `<component-name>/v<semver>`
and contract releases you'll see them tagged as `op-contract/vX.X.X`.

<Callout type="warning">
  For contract releases, refer to the GitHub release notes for a given release,
  which will list the specific contracts being released—**not all contracts are
  considered production ready within a release**, and many are under active
  development. These release pages are linked below.

  Tags of the form `v<semver>`, such as `v1.1.4`, indicate releases of all Go code
  only, and **DO NOT** include smart contracts.
</Callout>

todo: why don't v1.1.0 and v1.2.0 have governance proposals? Is it because they're
just l1 singleton contracts?
todo: write short descriptions

### v1.0.0 - Bedrock

The bedrock protocol upgrade refactored to the protocol to minimize the amount 
of code in the OP Stack, pushed it as close as possible to Ethereum-Equivalence,
and most importantly making the stack modular. 

*   [Bedrock release notes](https://github.com/ethereum-optimism/optimism/releases/tag/op-contracts%2Fv1.0.0) ...
*   [Governance post](https://gov.optimism.io/t/draft-upgrade-proposal-bedrock/5014)

### v1.1.0 - ProtocolVersions

The Protocol Version documents the progression of the total set of canonical 
OP Stack specifications. Components of the OP Stack implement the subset of 
their respective protocol component domain, up to a given Protocol Version 
of the OP Stack.

The Protocol Version is NOT a hardfork identifier, but rather indicates 
software-support for a well-defined set of features introduced in past and 
future hardforks, not the activation of said hardforks.

<Callout type="info">
  The Protocol Version only applies to the Protocol specifications with the 
  [Superchain Targets](https://specs.optimism.io/protocol/superchain-upgrades.html#superchain-target) 
  specified within. This versioning is independent of the Semver versioning 
  used in OP Stack smart contracts, and the Semver-versioned reference software 
  of the OP-Stack.
</Callout>

*   [ProtocolVersions release notes](https://github.com/ethereum-optimism/optimism/releases/tag/op-contracts%2Fv1.1.0)
*   [Governance post]()

### v1.2.0 - SuperchainConfig with Extended Pause Functionality

The SuperchainConfig contract is used to manage global configuration values for 
multiple OP Chains within a single Superchain network.

*   [SuperchainConfig and Extended Pause release notes](https://github.com/ethereum-optimism/optimism/releases/tag/op-contracts%2Fv1.2.0)
*   [Governance post]()

### v1.3.0 - Multi-Chain Prep (MCP)

This protocol upgrade strengthens the security and upgradeability of the 
Superchain by enabling L1 contracts to be upgraded atomically across multiple 
chains in a single transaction. This upgrade also extends the `SystemConfig` 
to contain the addresses of the contracts in the network, allowing users to 
discover the system’s contract addresses programmatically. 

*   [MCP release notes](https://github.com/ethereum-optimism/optimism/releases/tag/op-contracts%2Fv1.3.0-rc.1)
*   [Governance post](https://gov.optimism.io/t/upgrade-proposal-6-multi-chain-prep-mcp-l1/7677)
