---
title: Ecotone Network Upgrade
lang: en-US
description: Details on how to prepare your nodes for the Ecotone Network upgrade.
---

import { Callout, Steps } from 'nextra/components'
import { Tabs } from 'nextra/components'

# Ecotone Network Upgrade

<Callout type="warning">
  The Ecotone testnet network upgrade for OP Goerli activated at **1707238800 Tue Feb 6 17:00:00 UTC 2024**. The Ecotone upgrade for OP Sepolia is not scheduled yet.
</Callout>

The following information is how you can prepare your existing nodes for the Ecotone upgrade. There
is a new Beacon endpoint for `op-node`, because soon after the Ecotone activation, batch
transactions will be sent as 4844 blobs, and blobs can only be retrieved from Beacon nodes.
This means node operators will need access to a [consensus client](https://ethereum.org/developers/docs/nodes-and-clients#consensus-clients) (i.e. Lighthouse, Lodestar, Nimbus, Prysm, Teku, etc.).

<Callout type="info">
  If you're using Lighthouse, make sure to use at least the finalized version `v4.6.0`
  because the latest rc contains a bug in its `blob_sidecars` http endpoint.
</Callout>

## Required Actions (All Nodes)

You must upgrade your nodes to the following versions prior to Wed Feb 21 17:00:00 UTC 2024. These steps are necessary for EVERY node operator:

1.  Update to the latest release

*   [`op-geth`](https://github.com/ethereum-optimism/op-geth/releases/tag/v1.101305.3)
*   [`op-node`](https://github.com/ethereum-optimism/optimism/releases/tag/v1.5.0)

2.  Configure the Ecotone Activation Date

*   If you are operating a node for an OP Chain that has an entry in the `superchain-registry`, the Ecotone activation date is part of the `op-node` and `op-geth` nodes. So, no action is needed for the sequencer after upgrading to the latest release.
*   For node operators of custom chains not included in the `superchain-registry`, the activation dates can be set in the `rollup.json` (set `ecotone_time`) or set the activation time via overrides (CLI) in both `op-node` and `op-geth` help. These will need to be set on `op-node` and `op-geth` for the sequencer and all other nodes.

<Tabs items={['op-node', 'op-geth']}>
  <Tabs.Tab>
    ```shell
    --override.ecotone value            (default: 0)                       ($OP_NODE_OVERRIDE_ECOTONE)
              Manually specify the Ecotone fork timestamp, overriding the bundled setting
    ```
  </Tabs.Tab>

  <Tabs.Tab>
    ```shell
    --override.ecotone value            (default: 0)                       ($GETH_OVERRIDE_ECOTONE)
              Manually specify the Optimism Ecotone fork timestamp, overriding the bundled
              setting
    ```
  </Tabs.Tab>
</Tabs>

3.  Prepare for Activation

*   All node operators must set an L1 beacon value in your `op-node` as soon as you update to the latest release.

<Callout type="warning">
  If Ecotone activates and you have not set an l1 beacon value on your `op-node`, your node will crash.
</Callout>

```shell
--l1.beacon value                                                      ($OP_NODE_L1_BEACON)
          HTTP endpoint Address of L1 Beacon-node.
```

*   Either run your own L1 beacon node like [Lighthouse](https://lighthouse-book.sigmaprime.io/run_a_node.html) or use a third-party beacon node RPC service, like [Quicknode](https://www.quicknode.com/docs/ethereum/eth-v1-beacon-genesis).

## Configure a Blob Archiver (Archive Nodes)

There are several blob archiver options for archive nodes and new full notes without EL sync. Choose one of the following options:

*   **Option 1:**  Configure a `beacon-archiver`. There is a configurable `beacon-archiver` that will allow nodes to sync blob data that is older than 18 days - after blobs are 18 days old, normal beacon nodes will  "pruned" or remove them. If your node is already in sync with the head of the chain, you won't need to use a `beacon-archiver`.
    *   If you're spinning up a new node, if you load it from a snapshot that's within 18 days (the amount of time until blobs are pruned) you will not need to use a `beacon-archiver`  at all as long as your node does not fall offline for more than 18 days.
    *   If you're running a new node that is syncing more than 18 days (the amount of time until blobs are pruned) after Ecotone launch, then you will need to configure a `beacon-archiver` on the `op-node`.

```shell
--l1.beacon-archiver value                                                      ($OP_NODE_L1_BEACON)
          HTTP Endpoint of a Blob Archiver or an L1 Beacon-node that does not prune blobs 
```

*   **Option 2:** Run your own L1 beacon node like [Lighthouse](https://lighthouse-book.sigmaprime.io/run_a_node.html) and configure it to retain all blobs and use that endpoint here.

```shell
# lighthouse
--prune-blobs=false
```

*   **Option 3:** Run a `blob-archiver`, which functions the same, but is lighter weight: [https://github.com/base-org/blob-archiver](https://github.com/base-org/blob-archiver)

## Verify Your Configuration

You can verify your node is configured correctly with the following:

*   `op-node` and `op-geth` will log their configurations at startup
*   Check that Ecotone time is set to `activation-timestamp` in the op-node logs
*   Check that Ecotone and Cancun time is set to `activation-timestamp` in the op-geth logs

## Additional Support

If you require additional support. Please reach out on our [developer forum](https://github.com/ethereum-optimism/developers/discussions) and we'll answer your questions there.
