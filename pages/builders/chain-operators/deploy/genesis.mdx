---
title: OP Stack Genesis Creation
lang: en-US
description: Learn how to create a genesis file for the OP Stack.
---

import { Callout } from 'nextra/components'

# OP Stack Genesis Creation

The following guide shows you how to generate the L2 allocs. This is a JSON
file that represents the L2 genesis state. 

## [develop](https://github.com/ethereum-optimism/optimism/tree/develop)

<Callout type="warning">
  The primary development branch is `develop`. It contains the most up-to-date
  software that remains backwards compatible with the latest experimental
  netowrk deployments. **Changes to made to the smart contracts are usually
  NOT considered backwards compatible.**
</Callout>

As of 2024-06-04, a foundry script is used to generate the L2 genesis allocs.
The `CONTRACT_ADDRESSES_PATH` env var represents the deployment artifact that 
was generated during a contract deployment. The same deploy config JSON file 
should be used for L1 contracts deployment as when generating the L2 genesis 
allocs. The `STATE_DUMP_PATH` env var represents the filepath at which the 
allocs will be written to on disk.

```
CONTRACT_ADDRESSES_PATH=deployments/artifact.json \
DEPLOY_CONFIG_PATH=<PATH_TO_MY_DEPLOY_CONFIG> \
STATE_DUMP_PATH=<PATH_TO_WRITE_L2_ALLOCS> \
  forge script scripts/L2Genesis.s.sol:L2Genesis \
  --sig 'runWithStateDump()'
```

## [op-contracts/v1.3.0](https://github.com/ethereum-optimism/optimism/tree/op-contracts/v1.3.0)

The Multi-Chain Prep (MCP) L1 [release](https://github.com/ethereum-optimism/optimism/releases/tag/op-contracts%2Fv1.3.0),
cross-chain upgrades and mitigates potential exploitation risks during 
emergency, multi-chain upgrades by transitioning chain-specific deployment 
configuration variables from immutables into storage. It also extends 
`SystemConfig` to contain the addresses of the networkâ€™s contracts.

