---
title: OP Stack Genesis Creation
lang: en-US
description: Learn how to create a genesis file for the OP Stack.
---

import { Callout } from 'nextra/components'

# OP Stack Genesis Creation

The following guide shows you how to generate the L2 allocs. This is a JSON
file that represents the L2 genesis state. You will provide this file to the 
execution client (op-geth) to initialize your network.

## Solidity Script

At the time of this page is being written, the preferred genesis generation 
method is to use the foundry script is the monorepo. It can be found at
[packages/contracts-bedrock/scripts/L2Genesis.s.sol](https://github.com/ethereum-optimism/optimism/blob/develop/packages/contracts-bedrock/scripts/L2Genesis.s.sol).

The `CONTRACT_ADDRESSES_PATH` env var represents the deployment artifact that
was generated during a contract deployment. The same deploy config JSON file
should be used for L1 contracts deployment as when generating the L2 genesis
allocs. The `STATE_DUMP_PATH` env var represents the filepath at which the
allocs will be written to on disk.

```bash
CONTRACT_ADDRESSES_PATH=deployments/artifact.json \
DEPLOY_CONFIG_PATH=<PATH_TO_MY_DEPLOY_CONFIG> \
STATE_DUMP_PATH=<PATH_TO_WRITE_L2_ALLOCS> \
  forge script scripts/L2Genesis.s.sol:L2Genesis \
  --sig 'runWithStateDump()'
```

## Subcommand (op-node genesis l2)

Historically the genesis file creation was handled by the `genesis l2` 
subcommand, provided by the `op-node`. The following is an example of its usage
from [v1.7.6](https://github.com/ethereum-optimism/optimism/releases/tag/v1.7.6).

```bash
go run cmd/main.go genesis l2 \
  --deploy-config=<Path to deploy config file> \
  --l1-deployments value=<Path to L1 deployments JSON file as in superchain-registry> \
  --outfile.l2=<Path to L2 genesis output file: i.e. ./genesis.json> \
  --outfile.rollup=<Path to rollup output file: i.e. ./rollup.json> \
  --l1-rpc=<RPC URL for an Ethereum L1 node. Cannot be used with --l1-starting-bloc>>
```

Alternatively you can omit `--l1-rpc` and use `--l1-starting-block`. This option
lets you provide a path to a JSON file containing the L1 starting block. This 
overrides the need for using an L1 RPC to fetch the block. It cannot be used 
with `--l1-rpc`.

## Next Steps

*  Learn how to [initialize](/builders/node-operators/configuration/base-config#initialization-via-genesis-file)
`op-geth` with your genesis file
