---
title: USDC Implementation Guide
lang: en-US
description: Learn the two options for implementing Bridged USDC on OP Chain

---

import { Callout, Steps } from 'nextra/components'
import Image from 'next/image'

# USDC Implementation Options

OP Chain operators have two main options for implementing Bridged USDC:

## Bridged-to-Native Upgrade Path

This option utilizes the Bridged USDC Standard by Circle, allowing for a seamless upgrade from Bridged USDC to Native USDC.

*   Maintains compatibility with the [Law of Chains](https://gov.optimism.io/t/law-of-chains-v0-1-full-draft/6514).
*   Enables "in-place" upgrade to Native USDC, preserving contract address, user balances, and DeFi integrations.

### Benefits

*   Reduces the need to migrate liquidity if native USDC is deployed on your chain.
*   Minimizes potential fragmentation from having two types of USDC representations on your OP Chain.

### Limitations

*   Requires deploying an upgradeable custom bridge that the OP Chain operator custodies (be aware of the security implications)
*   Requires additional work from bridge interface partners and liquidity bridges to index the custom bridge

### Implementation Steps

The **Bridged-to-Native Upgrade path** has two stages:

*   pre-upgrade to Native USDC.
*   post-upgrade to Native USDC (after signing an agreement with Circle).

To implement both **pre-upgrade to Native USDC** and **post-upgrade to Native USDC**, you must deploy `[FiatTokenProxy.sol](https://github.com/circlefin/stablecoin-evm/blob/0d3cab14ebd133a83fc834dbd48d0468bdf0b391/contracts/v1/FiatTokenProxy.sol)` with `[FiatTokenV2_1.sol](https://github.com/circlefin/stablecoin-evm/blob/0d3cab14ebd133a83fc834dbd48d0468bdf0b391/contracts/v2/FiatTokenV2_1.sol)` as the implementation with a custom bridge following the guidelines set forth by [Circle](https://github.com/circlefin/stablecoin-evm/blob/master/doc/bridged_USDC_standard.md).

#### Pre-upgrade to Native USDC

| Stage                      | Pre-upgrade to Native USDC                                  |
| -------------------------- | ----------------------------------------------------------- |
| **Representation of USDC** | Bridged USDC                                                |
| **USDC Proxy Admin**       | OP Chain operator                                           |
| **Bridging**               | Users can bridge using the custom bridge between L1 and L2. |

<Callout type="info">
  During this stage, the OP Chain operator maintains control over the USDC Proxy admin, and users can bridge USDC using the custom bridge implemented between L1 and L2.
</Callout>

#### Post-upgrade to Native USDC

| Stage                      | Post-upgrade to Native USDC                                                                                                                                                                                                                              |
| -------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Representation of USDC** | Native USDC                                                                                                                                                                                                                                              |
| **USDC Proxy Admin**       | Circle                                                                                                                                                                                                                                                   |
| **Bridging**               | All tokens on the L1 side of the custom bridge are burned. Custom bridge is deprecated and no longer usable to bridge USDC from L1 to L2. Users now use the CCTP contracts that Circle deployed as part of the upgrade process to bridge between chains. |

<Callout type="info">
  1.  After the upgrade to Native USDC, control of the USDC Proxy admin is transferred to Circle, and the bridging mechanism changes significantly. The custom bridge is deprecated, and users must use Circle's CCTP contracts for bridging operations.
  2.  Add token metadata to the Superchain Tokenlist using the custom bridge format, after deploying the token, using the [guidelines](https://github.com/ethereum-optimism/ethereum-optimism.github.io/blob/master/data/USDC/data.json).
</Callout>

## Key Differences

The main differences between the pre-upgrade and post-upgrade stages are:

1.  The USDC representation changes from Bridged USDC to Native USDC.
2.  The USDC Proxy admin control shifts from the OP Chain operator to Circle.
3.  The bridging mechanism changes, with the custom bridge being deprecated in favor of Circle's CCTP contracts.

These changes allow for a seamless transition to Native USDC while maintaining the same contract addresses and preserving user balances and integrations.

## Standard Bridged USDC Path

This option is suitable for chains that only need Bridged USDC and don't anticipate requiring Native USDC in the near future.

### Benefits

*   Fastest way to get USDC on an OP Chain
*   Inherits the same security model as the OP Chain rollup

### Limitations

*   Requires significant migration effort if the chain operator wants to migrate to native USDC
*   Potential fragmentation with having two types of USDC representations on your OP Chain if the chain operator wants to migrate to native USDC

### Implementation Steps

1.  Deploy the **OVM fiat token** compatible with the [StandardBridge](https://github.com/ethereum-optimism/optimism/blob/develop/packages/contracts-bedrock/src/universal/StandardBridge.sol), if you only need bridged USDC and dont anticipate needing native USDC.
2.  Add token metadata to the Superchain Tokenlist using the custom bridge format, after deploying the token, using the [guidelines](https://github.com/ethereum-optimism/ethereum-optimism.github.io/blob/master/data/USDC/data.json).

## Deployment and Bridging Process

### L1 → L2 Deployment

<Image src="/img/builders/chain-operators/l1-l2-deployment.png" alt="L1 to L2 Deployment Process" width={800} height={600} />

This diagram showcases the deployment process of USDC bridge adapters and the necessary components on both L1 and L2 modes, focusing on initializing deployment, setting up proxies, and connecting the bridge adapters between L1 and L2.

<Steps>
  ### User Initiates Deployment

  *   he **User** initiates the deployment by interacting with the `L1OpUSDCFactory` contract.
  *   This factory contract serves as the entry point for deploying necessary contracts on L1 and facilitating setup on L2.

  ### L1 Contracts Deployment

  *   **L1OpUSDCFactory** then deploys the **L1OpUSDCBridgeAdapter**.
      *   This adapter is critical for bridging operations, allowing communication and token transfers between Layer 1 and Layer 2.

  ### OP Portal Setup

  *   After deploying on L1, the deployment process moves to L2, initiated through the **OP Portal**.
      *   The portal ensures connectivity between L1 and L2 for contract deployment.

  ### OP `Create2` Deployment on L2

  *   The portal triggers the `deploy` function, which calls the **OP Create2Deployer** on L2.
      *   This deployer contract facilitates the deployment of contracts on L2, ensuring that the deployment is secure.

  ### L2 Contracts Deployment

  *   The **L2OpUSDCDeploy** contract is deployed and set up using the OP Deployer, which establishes the Layer 2 deployment structure.
      *   This contract handles the deployment of L2 components, including the **L2OpUSDCBridgeAdapter**.

  ### Bridged USDC Implementation and Proxy

  *   After the deployment of the bridge adapters, the **Bridged USDC Proxy** contract is deployed.
      *   This proxy contract points to the **Bridged USDC Implementation** contract, which must be deployed ahead of time.

  ### Final Setup

  *   Once the deployment is complete, the **L2OpUSDCBridgeAdapter** and the **Bridged USDC Proxy** are connected, establishing the functional bridge between L1 and L2 for USDC operations.
</Steps>

### L1 → L2 USDC Canonical Bridging

<Image src="/img/builders/chain-operators/l1-l2-bridging.png" alt="L1 to L2 USDC Canonical Bridging Process" width={800} height={600} />

This diagram outlines the flow of transferring USDC tokens from Layer 1 (L1) Ethereum to Layer 2 (L2) through a bridging system. The diagram depicts the roles of the participants, the bridging mechanism, and the series of transactions between L1 and L2.

<Steps>
  ### Initiation of USDC Transfer

  *   **Actor:** `Anyone` - the user initiates the transfer by approving a specified `USDC amount` to the `_superUSDCBridgeAdapter`.
  *   The user calls the `approve` function to approve the transaction amount in USDC.

  ### Transfer via L1OpUSDCBridgeAdapter

  *   The **USDC** contract performs an internal transfer, sending the `USDC amount` to the **L1 OpUSDCBridgeAdapter**.
  *   **L1 OpUSDCBridgeAdapter** will then execute the `xTransfer` function, which manages the transfer request and prepares the message for cross-chain communication.

  ### Messaging Layer through OP Portal

  *   The **L1 OpUSDCBridgeAdapter** sends a message to the **OPCrossDomainMessenger**, which facilitates the communication between L1 and L2.
  *   The **OPCrossDomainMessenger** ensures that the transfer request and necessary data are relayed to L2.

  ### Receiving the Message on L2

  *   The **CrossDomainMessenger** on L2 receives the message sent by the L1 messenger.
  *   The **L2 OpUSDCBridgeAdapter** on L2 listens for the message and prepares to mint the corresponding `USDC amount`.

  ### Bridged USDC Minting

  *   After receiving the transfer request, the **L2 OpUSDCBridgeAdapter** mints the equivalent amount of **Bridged USDC** tokens.
  *   The `USDC amount` is minted to the users address, completing the cross-chain transfer.
</Steps>

### Migrating from Bridged USDC to Native USDC

<Image src="/img/builders/chain-operators/bridged-to-native-migration.png" alt="Migrating from Bridged USDC to Native USDC Process" width={800} height={600} />

This diagram illustrates the process of migrating from Bridged USDC to Native USDC. Below is a detailed explanation of each step:

<Steps>
  ### Initiates Chain Operator Migration (`migrateToNative`)

  *   **Chain Operator**: The entity responsible for initiating the migration.
  *   The chain operator calls the `migrateToNative` function, triggering two key actions:
      1.  **Transfer Ownership**: Transfers ownership of the current USDC bridge on L1 to the designated address.
      2.  **Blocking New Messages**: Blocks the acceptance of new messages for the specified `_chainId`, ensuring a secure migration process.

  ### L2 Adapter Receives Ownership Transfer (`receiveMigrateToNative`)

  *   The `L2OpUSDCBridgeAdapter` receives the ownership transfer and blocks the acceptance of new messages on L2 after the transfer.

  ### Transfer `OpUSDC` Ownership

  *   After receiving the ownership, the `L2OpUSDCBridgeAdapter` contract calls the `transferOwnership` function to transfer ownership of the `OpUSDC` contract.
  *   This step moves control over the `OpUSDC`.

  ### Set Burn Amount (`setBurnAmount`)

  *   Once the ownership transfer is complete, the system sets the amount of `OpUSDC` to be burned as part of the migration.
  *   There is a 7-day delay introduced here to ensure security and allow time for any necessary adjustments before proceeding further.

  ### Burn Locked USDC

  *   The **L1OpUSDCBridgeAdapter** can then call `burnLockedUSDC` contract.
  *   This step permanently burns the USDC on Layer 1, effectively locking the USDC in the process and completing the migration to native USDC on the destination chain.

  ### Circle Contract Addresses

  *   Both on L1 and L2, ownership is transferred to **Circle owned contract addresses**.
</Steps>

### Important Contracts

<Callout type="info">
  The factory that chain operators should use on L1 is at `0x7dB8637A5fd20BbDab1176BdF49C943A96F2E9c6`.
</Callout>

1.  **L1OpUSDCFactory.sol**: Use the factory contract to deploy and set up the `L1OpUSDCBridgeAdapter` contract on L1. Precalculates the addresses of the L2 deployments and trigger their deployment by sending a transaction to L2.

2.  **L2OpUSDCDeploy.sol**: It's a one-time use deployer contract deployed from the L1 factory through a cross-chain deployment. It's used as a utility contract for deploying the L2 USDC Proxy and `L2OpUSDCBridgeAdapter` contract, all at once in its constructor.

3.  **L1OpUSDCBridgeAdapter**:

*   This contract allows the transfer of USDC from Ethereum Mainnet to a specific OP Stack chain.
*   It locks USDC on Ethereum Mainnet and sends a message to the other chain to mint the equivalent amount of USDC.
*   It also receives messages from the other chain and unlocks USDC on Ethereum Mainnet.
*   It controls the message flow between layers and supports the requirements for migrating Bridged USDC to Native USDC if the chain operator and Circle desire.

4.  **L2OpUSDCBridgeAdapter**:

*   Contract that allows for the transfer of USDC from the specific OP Stack chain to Ethereum Mainnet.
*   It burns USDC on the L2 and sends a message to Ethereum Mainnet to unlock the equivalent amount of USDC.
*   It also receives messages from Ethereum Mainnet and mints USDC.
*   This contract allows the chain operator to execute arbitrary functions on the Bridged USDC contract as if they were the owner of the contract.

Contract that allows for the transfer of USDC from the specific OP Stack chain to Ethereum Mainnet.
It burns USDC on the L2 and sends a message to Ethereum Mainnet to unlock the equivalent amount of USDC.
It also receives messages from Ethereum Mainnet and mints USDC.
This contract allows the chain operator to execute arbitrary functions on the Bridged USDC contract as if they were the owner of the contract.

## Next Steps

*   Additional questions? See the FAQ section in the [Bridged USDC Standard Explainer](/builders/chain-operators/features/bridged-usdc-standard#faqs).
*   Ready to get started? Read our setup guide on the [Bridged USDC Standard for the OP Stack](https://github.com/defi-wonderland/opUSDC#setup).
*   If you experience any problems, please reach out to [developer support](https://github.com/ethereum-optimism/developers/discussions).
