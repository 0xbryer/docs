---
title: Chain Configuration
lang: en-US
description: Learn about the rollup configuration keys and values.
---

import { Callout } from 'nextra/components'

# Chain Configuration

The OP Stack is a flexible platform with various configuration values that you
can tweak to fit your specific needs. If you're looking to fine-tune your OP
Stack chain deployment, look no further.

<Callout type="warning">
  The Rollup configuration is an active work in progress and will likely evolve
  significantly as time goes on. If something isn't working about your 
  configuration, you can refer to the [source code](https://github.com/ethereum-optimism/optimism/blob/develop/op-chain-ops/genesis/config.go).
</Callout>

## Rollup Configuration

todo: check default values

New OP Stack blockchains are currently configured with a JSON file inside the 
Optimism repository. You can see example configurations in the 
[deploy-config directory](https://github.com/ethereum-optimism/optimism/tree/develop/packages/contracts-bedrock/deploy-config).

### Offset Values

#### l2GenesisRegolithTimeOffset

L2GenesisRegolithTimeOffset is the number of seconds after genesis block that
Regolith hard fork activates. Set it to 0 to activate at genesis. Nil to 
disable Regolith.

*  **Type:** Number of seconds
*  **Default:** nil

#### l2GenesisCanyonTimeOffset

L2GenesisCanyonTimeOffset is the number of seconds after genesis block that 
Canyon hard fork activates. Set it to 0 to activate at genesis. Nil to 
disable Canyon.

*  **Type:** Number of seconds
*  **Default:** nil

#### l2GenesisDeltaTimeOffset

L2GenesisDeltaTimeOffset is the number of seconds after genesis block that 
Delta hard fork activates. Set it to 0 to activate at genesis. Nil to disable 
Delta.

*  **Type:** Number of seconds
*  **Default:** nil

#### l2GenesisEcotoneTimeOffset

L2GenesisEcotoneTimeOffset is the number of seconds after genesis block that 
Ecotone hard fork activates. Set it to 0 to activate at genesis. Nil to disable
Ecotone.

*  **Type:** Number of seconds
*  **Default:** nil

#### l2GenesisFjordTimeOffset

L2GenesisFjordTimeOffset is the number of seconds after genesis block that 
Fjord hard fork activates. Set it to 0 to activate at genesis. Nil to 
disable Fjord.

*  **Type:** Number of seconds
*  **Default:** nil

#### l2GenesisInteropTimeOffset

L2GenesisInteropTimeOffset is the number of seconds after genesis block that 
the Interop hard fork activates. Set it to 0 to activate at genesis. Nil to 
disable Interop.

*  **Type:** Number of seconds
*  **Default:** nil

---

### Admin addresses

#### finalSystemOwner

FinalSystemOwner is the owner of the system on L1. Any L1 contract that is 
ownable has this account set as its owner.

*  **Type:** L1 Address
*  **Default / Recommended value:** It is recommended to have a single admin 
address to retain a common security model.

#### proxyAdminOwner

Address that will own the ProxyAdmin contract on L2. The L2 ProxyAdmin contract
owns all of the Proxy contracts for every predeployed contract in the range 
`0x42...0000` to `0x42..2048`. This makes predeployed contracts easily 
upgradeable.

*  **Type:** L2 Address
*  **Default / Recommended value:** It is recommended to have a single admin 
address to retain a common security model.

---

### Blocks

These fields apply to L2 blocks: Their timing, when they need to be written to L1, and how they get written.

#### l2BlockTime

Number of seconds between each L2 block. Must be < = L1 block time (12 on mainnet and Sepolia).

*  **Type:** Number of seconds
*  **Default value:** 2

#### maxSequencerDrift

How far the L2 timestamp can differ from the actual L1 timestamp.

*  **Type:** Number of seconds
*  **Default value:** 600 (10 minutes)

#### sequencerWindowSize

Maximum number of L1 blocks that a Sequencer can wait to incorporate the information in a specific L1 block. For example, if the window is 10 then the information in L1 block n must be incorporated by L1 block n+10.

*  **Type:** Number of blocks
*  **Default value:** 3600 (12 hours)

#### channelTimeout

Maximum number of L1 blocks that a transaction channel frame can be considered valid. A transaction channel frame is a chunk of a compressed batch of transactions. After the timeout, the frame is dropped.

*  **Type:** Number of blocks
*  **Default value:** 300 (1 hour)

#### p2pSequencerAddress

Address of the key that the Sequencer uses to sign blocks on the p2p network.

*  **Type:** L1 Address
*  **Default value:** Sequencer, an address for which you own the private key

#### batchInboxAddress

Address that Sequencer transaction batches are sent to on L1.

*  **Type:** L1 Address
*  **Default value:** 0xff00â€¦0042069

#### batchSenderAddress

Address that nodes will filter for when searching for Sequencer transaction batches being sent to the batchInboxAddress. Can be updated later via the SystemConfig contract on L1.

*  **Type:** L1 Address
*  **Default value:** Batcher, an address for which you own the private key

--- 

### Proposal Fields

These fields apply to output root proposals. The l2OutputOracleSubmissionInterval is configurable, see the section below for guidance.

#### l2OutputOracleStartingBlockNumber

Block number of the first OP Stack block. Typically this should be zero, but this may be non-zero for networks that have been upgraded from a legacy system (like OP Mainnet). Will be removed with the addition of permissionless proposals.

*  **Type:** Number
*  **Default value:** 0

#### l2OutputOracleStartingTimestamp

Timestamp of the first OP Stack block. This MUST be the timestamp corresponding to the block defined by the l1StartingBlockTag. Will be removed with the addition of permissionless proposals.

*  **Type:** Number
*  **Default value:** None

#### l2OutputOracleSubmissionInterval

Number of blocks between proposals to the L2OutputOracle. Will be removed with the addition of permissionless proposals.

*  **Type:** Number of blocks
*  **Default value:** 120 (4 minutes)

#### finalizationPeriodSeconds

Number of seconds that a proposal must be available to challenge before it is considered finalized by the OptimismPortal contract.

*  **Type:** Number of seconds
*  **Default value:** Recommend 12 on test networks, seven days on production ones

#### l2OutputOracleProposer

Address that is allowed to submit output proposals to the L2OutputOracle contract. Will be removed when the OP Stack has permissionless proposals.

*  **Type:** L1 Address
*  **Default value:** None

#### l2OutputOracleChallenger

Address that is allowed to challenge output proposals submitted to the L2OutputOracle. Will be removed when the OP Stack has permissionless challenges.

*  **Type:** L1 Address
*  **Default value:** It is recommended to have a single admin address to retain a common security model.

---

### Fee recipients

#### baseFeeVaultRecipient

BaseFeeVaultRecipient represents the recipient of fees accumulated in the 
BaseFeeVault. Can be an account on L1 or L2, depending on the 
BaseFeeVaultWithdrawalNetwork value.

*  **Type:** L1 or L2 Address
*  **Default value:** It is recommended to have a single admin address to 
retain a common security model.

#### l1FeeVaultRecipient

L1FeeVaultRecipient represents the recipient of fees accumulated in the 
L1FeeVault. Can be an account on L1 or L2, depending on the 
L1FeeVaultWithdrawalNetwork value.

*  **Type:** L1 or L2 Address
*  **Default value:** It is recommended to have a single admin address to 
retain a common security model.

#### sequencerFeeVaultRecipient

SequencerFeeVaultRecipient represents the recipient of fees accumulated in the
SequencerFeeVault. Can be an account on L1 or L2, depending on the 
SequencerFeeVaultWithdrawalNetwork value.

*  **Type:** L1 or L2 Address
*  **Default value:** It is recommended to have a single admin address to 
retain a common security model.

---

### Minimum Fee Withdrawal Amounts

Withdrawals to L1 are expensive and the minimum fee is to prevent overhead
costs of continuous tiny withdrawals. If the withdrawal execution costs more 
than the fee-reward, then the fee cannot be collected economically.

#### baseFeeVaultMinimumWithdrawalAmount

BaseFeeVaultMinimumWithdrawalAmount represents the minimum withdrawal amount 
for the BaseFeeVault.

*  **Type:** Number in wei
*  **Default value:** 10 ether

#### l1FeeVaultMinimumWithdrawalAmount

L1FeeVaultMinimumWithdrawalAmount represents the minimum withdrawal amount for 
the L1FeeVault.

*  **Type:** Number in wei
*  **Default value:** 10 ether

#### sequencerFeeVaultWithdrawalAmount

SequencerFeeVaultMinimumWithdrawalAmount represents the minimum withdrawal 
amount for the SequencerFeeVault.

*  **Type:** Number in wei
*  **Default value:** 10 ether

---

### Withdrawal Network

#### baseFeeVaultWithdrawalNetwork

A value of 0 will withdraw ETH to the recipient address on L1 and a value of 1 will withdraw ETH to the recipient address on L2.

*  **Type:** Number representing network enum
*  **Default value:** None

#### l1FeeVaultWithdrawalNetwork

A value of 0 will withdraw ETH to the recipient address on L1 and a value of 1 will withdraw ETH to the recipient address on L2.

*  **Type:** Number representing network enum
*  **Default value:** None

#### sequencerFeeVaultWithdrawalNetwork

A value of 0 will withdraw ETH to the recipient address on L1 and a value of 1 will withdraw ETH to the recipient address on L2.

*  **Type:** Number representing network enum
*  **Default value:** None

--- 

### Misc.

#### numDeployConfirmations

Number of confirmations to wait when deploying smart contracts to L1.

*  **Type:** Number of blocks
*  **Default value:** 1

#### l1StartingBlockTag

Block tag for the L1 block where the L2 chain will begin syncing from. Generally recommended to use a finalized block to avoid issues with reorgs.

*  **Type:** Block hash
*  **Default value:** None

#### l1ChainID

Chain ID of the L1 chain.

*  **Type:** Number
*  **Default value:**

1 for L1 Ethereum mainnet
11155111 for the Sepolia test network
See here for other blockchains.

#### l2ChainID

Chain ID of the L2 chain.

*  **Type:** Number
*  **Default value:** 42069

#### l2GenesisBlockExtraData

L2GenesisBlockExtraData is configurable extradata. Will default to 
[]byte("BEDROCK") if left unspecified.

#### superchainConfigGuardian

SuperchainConfigGuardian represents the GUARDIAN account in the 
SuperchainConfig. Has the ability to pause withdrawals.
* **Type:** L1 Address

### OP-Batcher Configuration

The `op-batcher` is configurable, see the sections below for guidance.

| Key                                 | Type   | Description                                                                                                | Default value |
| ----------------------------------- | ------ | ---------------------------------------------------------------------------------------------------------- | ------------- |
| `OP_BATCHER_MAX_CHANNEL_DURATION`   | Number | The maximum duration of L1-blocks to keep a channel open. Set to `0` to disable.                           | 0             |
| `OP_BATCHER_BATCH_TYPE`             | Number | The batch type. Set to `0` for SingularBatch and `1` for SpanBatch.                                        | 0             |
| `OP_BATCHER_DATA_AVAILABILITY_TYPE` | String | The data availability type to use for submitting batches to the L1. Valid options: `calldata`, `blobs`     | calldata      |
| `OP_BATCHER_TARGET_NUM_FRAMES`      | Number | The target number of frames to create per channel. Controls number of blobs per blob tx, if using Blob DA. | 1             |
| `OP_BATCHER_TXMGR_MIN_BASEFEE`      | Number | Enforces a minimum base fee (in GWei) to assume when determining tx fees. 1 GWei by default.               | 1             |
| `OP_BATCHER_TXMGR_MIN_TIP_CAP`      | Number | Enforces a minimum tip cap (in GWei) to use when determining tx fees. 1 GWei by default.                   | 1             |
| `OP_BATCHER_RESUBMISSION_TIMEOUT`   | Number | Duration to wait before resubmitting a transaction to L1.                                                  | 48s           |

#### Set Your  `OP_BATCHER_MAX_CHANNEL_DURATION`

<Callout>
  The default value inside `op-batcher`, if not specified, is still `0`, which means channel duration tracking is disabled.
  For very low throughput chains, this would mean to fill channels until close to the sequencing window and post the channel to `L1 SUB_SAFETY_MARGIN` L1 blocks before the sequencing window expires.
</Callout>

To minimize costs, we recommend setting your  `OP_BATCHER_MAX_CHANNEL_DURATION` to target 5 hours, with a value of `1500` L1 blocks. When non-zero, this parameter is the max time (in L1 blocks, which are 12 seconds each) between which batches will be submitted to the L1. If you have this set to 5 for example, then your batcher will send a batch to the L1 every 5\*12=60 seconds. When using blobs, because 130kb blobs need to be purchased in full, if your chain doesn't generate at least \~130kb of data in those 60 seconds, then you'll be posting only partially full blobs and wasting storage.

*   We do not recommend setting any values higher than targeting 5 hours, as batches have to be submitted within the sequencing window which defaults to 12 hours for OP chains, otherwise your chain may experience a 12 hour long chain reorg. 5 hours is the longest length of time we recommend that still sits snugly within that 12 hour window to avoid affecting stability.
*   If your chain fills up full blobs of data before the `OP_BATCHER_MAX_CHANNEL_DURATION` elapses, a batch will be submitted anyways - (e.g. even if the OP Mainnet batcher sets an `OP_BATCHER_MAX_CHANNEL_DURATION` of 5 hours, it will still be submitting batches every few minutes)

<Callout type="warning">
  While setting an`OP_BATCHER_MAX_CHANNEL_DURATION` of `1500` results in the cheapest fees, it also means that your [safe head](https://github.com/ethereum-optimism/specs/blob/main/specs/glossary.md#safe-l2-head) can stall for up to 5 hours.

  *   This will negatively impact apps on your chain that rely on the safe head for operation. While many apps can likely operate simply by following the unsafe head, often Centralized Exchanges or third party bridges wait until transactions are marked safe before processing deposits and withdrawal.
  *   Thus a larger gap between posting batches can result in significant delays in the operation of certain types of high-security applications.
</Callout>

#### Configure Your Batcher to Use Multiple Blobs

The `op-batcher` has the capabilities to send multiple blobs per single blob transaction. This is accomplished by the use of multi-frame channels, see the [specs](https://specs.optimism.io/protocol/derivation.html#frame-format) for more technical details on channels and frames.

A minimal batcher configuration (with env vars) to enable 6-blob batcher transactions is:

```
  - OP_BATCHER_BATCH_TYPE=1 # span batches, optional
  - OP_BATCHER_DATA_AVAILABILITY_TYPE=blobs
  - OP_BATCHER_TARGET_NUM_FRAMES=6 # 6 blobs per tx
  - OP_BATCHER_TXMGR_MIN_BASEFEE=2.0 # 2 gwei, might need to tweak, depending on gas market
  - OP_BATCHER_TXMGR_MIN_TIP_CAP=2.0 # 2 gwei, might need to tweak, depending on gas market
  - OP_BATCHER_RESUBMISSION_TIMEOUT=240s # wait 4 min before bumping fees
```

This enables blob transactions and sets the target number of frames to 6, which translates to 6 blobs per transaction.
The minimum tip cap and base fee are also lifted to 2 gwei because it is uncertain how easy it will be to get 6-blob transactions included and slightly higher priority fees should help.
The resubmission timeout is increased to a few minutes to give more time for inclusion before bumping the fees because current transaction pool implementations require a doubling of fees for blob transaction replacements.

Multi-blob transactions are particularly useful for medium to high-throughput chains, where enough transaction volume exists to fill up 6 blobs in a reasonable amount of time.
You can use [this calculator](https://docs.google.com/spreadsheets/d/12VIiXHaVECG2RUunDSVJpn67IQp9NHFJqUsma2PndpE/edit) for your chain to determine what number of blobs are right for you, and what gas scalar configuration to use. Please also refer to guide on [Using Blobs](/builders/chain-operators/management/blobs) for chain operators.
